function generateEAN() {
  const value = document.getElementById('ean-input').value.trim();
  const canvas = document.getElementById('ean-canvas');
  const type = document.getElementById('ean-type').value;

  // Clear canvas first
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (!value) return;

  try {
    JsBarcode(canvas, value, {
      format: type,
      displayValue: true,
      fontSize: 18,
      height: 100,
    });
    document.getElementById('download-btn').style.display = 'inline-block';
  } catch (e) {
    console.error("Invalid barcode:", e);
    alert('Invalid EAN code.');
  }
}
